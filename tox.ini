[tox]
envlist = py38,py39,py310,py311,py312,type,lint,coverage
skip_missing_interpreters = True

[testenv]
deps =
    pytest>=7.4
    idna>=3.6
commands =
    pytest {posargs}

[testenv:type]
basepython = python3.12
deps =
    mypy>=1.8
    idna>=3.6
commands =
    mypy urlp

[testenv:lint]
basepython = python3.12
deps =
    flake8>=4.0
    isort>=5.11
commands =
    flake8 urlp tests
    isort --check-only urlp tests

[testenv:coverage]
basepython = python3.12
deps =
    pytest>=7.4
    pytest-cov>=4.0
    idna>=3.6
commands =
    pytest --cov=urlp --cov-report=html --cov-report=term-missing {posargs}

[testenv:dev]
basepython = python3.12
usedevelop = True
extras = dev
deps =
    pytest>=7.4
    mypy>=1.8
    bandit>=1.7
    idna>=3.6
commands =
    python -c "print('Development environment ready. Run: pytest, mypy urlp, bandit -r urlp')"
